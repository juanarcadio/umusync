<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- This is the actual bean to execute (with an optional parameter that is consumed by the job)
	Things to note:
		- the 'id' is arbitrary but must be the same for this bean definition AND the following one
		- the 'class' is the fully qualified package name of your Java class
		- you can inject any properties or services into your job in this bean.
    -->
    
	<bean id="DoJobsSync"
		depends-on="org.sakaiproject.authz.api.AuthzGroupService,
					org.sakaiproject.tool.api.SessionManager,
					umu.sakai.umusync.api.ISyncManager" 
		class="umu.sakai.umujobs.DoJobs">
		<property name="jobs" ref="umusync-jobs"/>
   		<property name="authzGroupService"><ref bean="org.sakaiproject.authz.api.AuthzGroupService"/></property>
		<property name="sessionManager"><ref bean="org.sakaiproject.tool.api.SessionManager"/></property>
	</bean>

	<!-- This is the helper that will register the above bean with the ScheduleManager
   	Things to note:
   		- id must end with the same bean id from above
   		- class must be the class of the SpringJobBeanWrapper, ie don't change it.
   		- the beanId property must match the bean id from above
   		- the jobName property is the text that will be rendered in the list of jobs in Sakai
	-->
	<bean id="org.sakaiproject.api.app.scheduler.JobBeanWrapper.DoJobsSync"
		depends-on="org.sakaiproject.api.app.scheduler.SchedulerManager"
		class="org.sakaiproject.component.app.scheduler.jobs.SpringJobBeanWrapper"
		singleton="true" init-method="init">
		
		<property name="beanId"><value>DoJobsSync</value></property>
		<property name="jobName"><value>Sync Sites Job</value></property>
      	<property name="schedulerManager"><ref bean="org.sakaiproject.api.app.scheduler.SchedulerManager" /></property>
		
   </bean>	
   
</beans>